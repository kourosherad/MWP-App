<!DOCTYPE html>
<html lang="fa">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>سامانه پرسنلی واگن پارس مپنا</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @font-face {
            font-family: "fnt";
            src: url(/public/fonts/IRANSansWeb.woff);
        }

        @font-face {
            font-family: "fnt-b";
            src: url(/public/fonts/IRANSansWeb_Bold.woff);
        }

        body {
            font-family: 'fnt-b';
        }
    </style>
</head>

<body class="bg-neutral-600 text-gray-100">

    <!-- Header -->
    <header class="bg-red-700 fixed top-0 left-0 w-full z-50 flex items-center py-2 px-4 shadow-lg">
        <h1 class="text-center text-white text-xl flex-grow">سامانه پرسنلی واگن پارس</h1>
        <img class="max-w-[90px] h-auto mr-4" src="/public/logo/white-wp.png" alt="wp-logo">
    </header>

    <!-- Profile Section -->
    <div class="container mx-auto mt-20 p-4">
        <div class="bg-neutral-400 text-gray-100 p-4 rounded-lg flex items-center justify-end mb-4">
            <div>
                <h4 class="text-lg">نام کاربر</h4>
                <p class="text-sm">شماره شناسایی: 123456</p>
            </div>
            <img class="w-16 h-16 rounded-full ml-4" src="/public/icons/usericon.png" alt="Profile Picture">
        </div>

        <!-- Info Bar -->
        <div class="bg-gray-800 text-gray-100 p-2 rounded-lg flex items-center justify-between mb-4">
            <div id="current-date">تاریخ امروز: 1402/10/26</div>
            <div class="relative group">
                <button id="menu-btn" class="bg-white text-red-700 rounded-lg p-2 flex items-center justify-center">
                    <img class="w-8 h-8" src="/public/icons/hamburgerbtn.png" alt="Items">
                </button>
                <ul id="menu"
                    class="hidden mt-2 absolute right-0 bg-neutral-400 text-gray-800 rounded-lg shadow-lg p-2 w-40">
                    <li class="flex items-center">
                        <a id="change-password-btn" class="block w-full px-4 py-2 hover:text-red-500" href="#">تغییر رمز عبور</a>
                    </li>
                </ul>
                <!-- مودال تغییر رمز عبور -->
                <div id="password-modal"
                    class="fixed inset-0 bg-gray-800 bg-opacity-70 flex items-center justify-center hidden">
                    <div class="bg-gray-800 p-8 rounded-lg shadow-lg w-96">
                        <h2 class="text-center text-xl font-bold mb-4">تغییر رمز عبور</h2>

                        <!-- فرم تغییر رمز عبور -->
                        <div id="current-password-container" class="mb-4">
                            <label for="current-password" class="text-sm">رمز عبور فعلی</label>
                            <input type="password" id="current-password"
                                class="w-full p-2 bg-gray-700 text-white border border-gray-600 rounded focus:outline-none focus:ring-2 focus:ring-blue-500">
                            <p id="current-password-error" class="text-red-500 text-sm hidden mt-1">رمز عبور اشتباه است
                            </p>
                        </div>

                        <div id="new-password-container" class="mb-4 hidden">
                            <label for="new-password" class="text-sm">رمز عبور جدید</label>
                            <input type="password" id="new-password"
                                class="w-full p-2 bg-gray-700 text-white border border-gray-600 rounded focus:outline-none focus:ring-2 focus:ring-blue-500">
                        </div>

                        <!-- دکمه‌ها -->
                        <div class="flex justify-between mt-4">
                            <button id="cancel-btn"
                                class="py-2 px-4 bg-gray-500 text-white rounded hover:bg-gray-600">انصراف</button>
                            <button id="submit-btn"
                                class="py-2 px-4 bg-blue-600 text-white rounded hover:bg-blue-700">ثبت</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Main Buttons -->
        <div class="flex flex-col items-center space-y-4" dir="rtl">
            <!-- Generic Button Class -->
            <button class="btn-main" onclick="location.href='https://ets.mapnawagonpars.com/'">
                <span>کارت ساعت (ETS)</span>
                <img class="w-8 h-8 ml-2" src="/public/icons/time-tracking.png" alt="ETS Icon">
            </button>

            <button class="btn-main" onclick="location.href='fr_pishnahad.html'">
                <span>نظام پیشنهادات</span>
                <img class="w-8 h-8 ml-2" src="/public/icons/suggestion.png" alt="Suggestions Icon">
            </button>

            <button class="btn-main" onclick="location.href='fr_rep_nfs_pers.html'">
                <span>نفرساعت جذب شده</span>
                <img class="w-8 h-8 ml-2" src="/public/icons/time-management.png" alt="Hours Icon">
            </button>

            <button class="btn-main" onclick="location.href='fr_fish.html'">
                <span>فیش حقوقی</span>
                <img class="w-8 h-8 ml-2" src="/public/icons/checking.png" alt="Salary Icon">
            </button>

            <button class="btn-main" onclick="location.href='fr_kasr.html'">
                <span>گواهی کسر از حقوق</span>
                <img class="w-8 h-8 ml-2" src="/public/icons/time-tracking.png" alt="#">
            </button>

            <button class="btn-main" onclick="location.href='fr_niaz.html'">
                <span>نیاز سنجی</span>
                <img class="w-8 h-8 ml-2" src="/public/icons/employees.png" alt="Insurance Icon">
            </button>

            <button class="btn-main" onclick="location.href='fr_mosaede.html'">
                <span>درخواست مساعده</span>
                <img class="w-8 h-8 ml-2" src="/public/icons/hand.png" alt="Request Icon">
            </button>

            <button class="btn-main" onclick="location.href='fr_car.html'">
                <span>درخواست خودرو</span>
                <img class="w-8 h-8 ml-2" src="/public/icons/sedan.png" alt="Car Icon">
            </button>

            <button class="btn-main" onclick="location.href='fr_guest.html'">
                <span>فرم مهمان</span>
                <img class="w-8 h-8 ml-2" src="/public/icons/contact-list.png" alt="Guest Icon">
            </button>

            <button class="btn-main" onclick="location.href='fr_exam.html'">
                <span>شرکت در آزمون</span>
                <img class="w-8 h-8 ml-2" src="/public/icons/exam.png" alt="Exam Icon">
            </button>
        </div>

        <!-- Footer -->
        <footer class="bg-gray-800 text-gray-100 text-center py-4 mt-4 rounded-lg">
            <p>&copy; 2024 سیستم مدیریت پرسنل واگن پارس مپنا</p>
        </footer>
    </div>

    <style>
        .btn-main {
            display: flex;
            justify-content: space-between;
            align-items: center;
            width: 100%;
            padding: 12px;
            border-radius: 8px;
            background-color: white;
            color: #d31010;
            border: 1px solid #b71c1c;
            transition: all 0.2s ease-in-out;
        }

        .btn-main:hover {
            background-color: #b71c1c;
            color: white;
        }
    </style>

    <script>
        $(document).ready(function () {
            // ایجاد سایه زیر هدر هنگام اسکرول
            const header = $('header');
            $(window).on('scroll', function () {
                if ($(this).scrollTop() > 0) {
                    header.addClass('shadow-lg');
                } else {
                    header.removeClass('shadow-lg');
                }
            });

            // گرفتن اطلاعات از سرور
            $.get('/user-info', function (data) {
                $('#userName').text(data.name);
                $('#userId').text('شماره شناسایی: ' + data.id);
                $('#current-date').text('تاریخ امروز: ' + data.currentDate);
            });

            // باز و بسته کردن منوی همبرگر
            $('#menu-btn').click(function () {
                $('#menu').toggleClass('hidden');
            });
        });
    </script>
    <script>
        // نمایش مودال زمانی که روی لینک تغییر رمز عبور کلیک می‌شود
        document.getElementById('change-password-btn').addEventListener('click', function (e) {
            e.preventDefault(); // از بارگذاری مجدد صفحه جلوگیری می‌کند
            document.getElementById('password-modal').classList.remove('hidden');
        });

        // بسته شدن مودال
        document.getElementById('cancel-btn').addEventListener('click', function () {
            document.getElementById('password-modal').classList.add('hidden');
        });

        // بررسی رمز عبور فعلی و ادامه
        document.getElementById('submit-btn').addEventListener('click', function () {
            const currentPassword = document.getElementById('current-password').value;
            const newPassword = document.getElementById('new-password').value;

            // فرض می‌کنیم که پسورد فعلی درست باید "123456" باشد
            const correctPassword = '123456';

            // بررسی پسورد فعلی
            if (currentPassword === correctPassword) {
                // مخفی کردن پسورد فعلی و نمایش پسورد جدید
                document.getElementById('current-password-container').classList.add('hidden');
                document.getElementById('new-password-container').classList.remove('hidden');
            } else {
                // نمایش خطای پسورد اشتباه
                document.getElementById('current-password').classList.add('border-red-500');
                document.getElementById('current-password-error').classList.remove('hidden');
            }
        });
    </script>


</body>

</html>